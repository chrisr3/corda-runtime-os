enabled: true
volumePermissions:
  enabled: true
tls:
  enabled: true
  autoGenerated: true
auth:
  database: cordacluster
  username: user
  password:
primary:
  resources:
    requests:
      memory: 256Mi
      cpu: 300m
    limits:
      memory: 512Mi
      cpu: 600m
  initdb:
    scripts:
      corda_user_init.sh: |
        export PGPASSFILE=/tmp/pgpasswd$$
        touch $PGPASSFILE
        chmod 600 $PGPASSFILE
        trap "rm $PGPASSFILE" EXIT
        echo "localhost:${POSTGRES_PORT_NUMBER:-5432}:$POSTGRESQL_DATABASE:postgres:$POSTGRES_POSTGRES_PASSWORD" > $PGPASSFILE
        psql -v ON_ERROR_STOP=1 cordacluster <<-EOF
          ALTER ROLE "$POSTGRES_USER" NOSUPERUSER CREATEDB CREATEROLE INHERIT LOGIN;
        EOF